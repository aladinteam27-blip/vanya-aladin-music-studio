import{r as p,A as Z,w as ee,u as te}from"./chunk-TMI4QPZX-BVqiWkAD.js";import{j as t}from"./jsx-runtime-DcXb6ZX0.js";import{V as se}from"./index-BqNmMoXL.js";import{M as oe,S as ne}from"./SoundClip-V-iuGg9O.js";import{c as w,B as re}from"./Button-IjTD_0mw.js";import{L as ae}from"./Link-DRBASfB9.js";import{i as ie,M as ce}from"./Media-DtG2FvmQ.js";import{S as le,a as de,b as ue}from"./SideNavigation-Cst1MhIX.js";import{s as pe}from"./sizes-D3gHFPVT.js";import{u as F}from"./useMediaQuery-Cia4MB4K.js";import{f as $,c as me}from"./use-constant-CkCy81vb.js";import{b as he,u as V,a as I}from"./use-transform-DQZFTRCD.js";import{i as z,k as ve,l as fe,p as Se,m as g}from"./proxy-eeD3tSc-.js";import{a as X,u as _e}from"./use-scroll-Sh_zwHIt.js";import{u as b}from"./use-spring-CUlHO-Oy.js";import{a as k}from"./animate-DWVHg8xa.js";import{A as ge}from"./index-BCdbbCaA.js";import{g as ye}from"./seo-CehLAoT6.js";import"./index-BUhclt4e.js";import"./index-TTH9Vhfl.js";import"./SanityImage-vCBjMjNw.js";import"./preload-helper-BddPh8Hi.js";import"./index-tSxL9Q3G.js";import"./Loader-ClrBuMNE.js";import"./IconArrowDown-BWFxtRes.js";import"./useDelayedLoading-Dpw-u_wr.js";import"./LoadMore.module-TftuuCtG.js";import"./IconCross-BAXVJGEi.js";import"./IconPlus-D_TZUNTi.js";import"./MusicCover-BipidJSD.js";import"./MusicPlayingSourceProvider-DwoLX-4w.js";import"./i18n--oqADElV.js";import"./Image-BVxgSOEs.js";import"./breakpoints.module-DaWcUtnS.js";import"./transform-Cei2VDX4.js";import"./resolve-element-DSwK4mYd.js";function be(o,...n){const s=o.length;function e(){let r="";for(let a=0;a<s;a++){r+=o[a];const d=n[a];d&&(r+=z(d)?d.get():d)}return r}return he(n.filter(z),e)}function je(o){const n=V(o.getVelocity()),s=()=>{const e=o.getVelocity();n.set(e),e&&$.update(s)};return X(o,"change",()=>{$.update(s,!1,!0)}),n}function we(){!ve.current&&fe();const[o]=p.useState(Se.current);return o}class Ie{constructor(){this.componentControls=new Set}subscribe(n){return this.componentControls.add(n),()=>this.componentControls.delete(n)}start(n,s){this.componentControls.forEach(e=>{e.start(n.nativeEvent||n,s)})}}const xe=()=>new Ie;function Me(){return me(xe)}const qe="_root_11r50_19",Ne="_musicCollectionWrapper_11r50_28",Re="_soundClipWrap_11r50_39",Le="_soundclip_11r50_51",D={root:qe,musicCollectionWrapper:Ne,soundClipWrap:Re,soundclip:Le},Ce="_root_88mzc_19",We="_thumb_88mzc_35",G={root:Ce,thumb:We},Ve={initial:{scaleY:1/8},rootHover:{scaleY:.5},hover:{scaleY:1},drag:{cursor:"grabbing"}},Te=({className:o,numberOfSlides:n,onDragStart:s,onDrag:e,onDragEnd:r,scrollProgress:a})=>{const d=p.useRef(null),[u,m]=p.useState(!1),[S,h]=p.useState(!1),y=Me(),x=(v,f)=>{h(!0),s==null||s(v,f)},M=(v,f)=>{h(!1),m(!1),r==null||r(v,f)},N=(v,f)=>{h(!0),e==null||e(v,f)},R=I(a,[0,1],["calc(0% * (var(--ci-dynamic-number-of-slides) - 1))","calc(100% * (var(--ci-dynamic-number-of-slides) - 1))"]);return t.jsx("div",{ref:d,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),className:w(G.root,o),style:{"--ci-dynamic-number-of-slides":n},children:t.jsx(g.div,{initial:"initial",whileHover:"hover",whileDrag:"drag",onDragStart:x,onDragEnd:M,onDrag:N,dragListener:!1,animate:u?"rootHover":"initial",variants:Ve,className:G.thumb,dragControls:y,onPointerDownCapture:v=>y.start(v,{snapToCursor:!0}),drag:"x",style:{...!S&&{x:R}},dragMomentum:!1,dragConstraints:d})})},Pe="_root_gjbqq_19",De="_canvasesWrapper_gjbqq_75",Ee="_canvasWrapper_gjbqq_79",Oe="_canvasVisibleWrapper_gjbqq_86",Ae="_canvasOrchestratorWrapper_gjbqq_90",Ye="_indicator_gjbqq_105",He="_sidebar_gjbqq_121",Be="_canvasGrid_gjbqq_137",Xe="_slidePositioner_gjbqq_146",$e="_orchestratorSlide_gjbqq_152",ze="_orchestratorSlideActive_gjbqq_155",Ge="_visibleSlide_gjbqq_159",Ue="_showcaseSlideInner_gjbqq_164",Fe="_showcaseSlideInnerBorder_gjbqq_167",ke="_showcaseSlideInnerDropShadow_gjbqq_177",Ke="_showcaseSlideInnerInsetShadow_gjbqq_188",Je="_mobileNav_gjbqq_202",Qe="_navList_gjbqq_219",Ze="_navItem_gjbqq_225",et="_navItemActive_gjbqq_232",l={root:Pe,canvasesWrapper:De,canvasWrapper:Ee,canvasVisibleWrapper:Oe,canvasOrchestratorWrapper:Ae,indicator:Ye,sidebar:He,canvasGrid:Be,slidePositioner:Xe,orchestratorSlide:$e,orchestratorSlideActive:ze,visibleSlide:Ge,showcaseSlideInner:Ue,showcaseSlideInnerBorder:Fe,showcaseSlideInnerDropShadow:ke,showcaseSlideInnerInsetShadow:Ke,mobileNav:Je,navList:Qe,navItem:Ze,navItemActive:et},tt=({musicLandingPage:o,onSlideLazyChange:n})=>{const{featuredMusic:s}=o,e=p.useRef(null),r=p.useRef(null),[a,d]=p.useState(0),[u,m]=p.useState(0),[S,h]=p.useState(!1),[y,x]=p.useState(!1),{scrollXProgress:M,scrollX:N}=_e({container:e}),R=je(N),v={stiffness:400,mass:.1,damping:20},f=b(M,v),q=b(R,v),T=I(M,[0,1],["calc(0 * var(--config-canvas-height) - 0%","calc(1 * var(--config-canvas-height) - 100%"]),E=I(f,[0,1],["calc(0 * var(--config-canvas-height) - 0%","calc(1 * var(--config-canvas-height) - 100%"]),O=I(f,[0,1],["calc((-100% + 100vw) * 0)","calc((-100% + 100vw) * 1)"]);X(f,"change",i=>{const c=Math.min(Math.max(Math.floor(i*s.length),0),s.length-1);d(c)}),X(q,"change",i=>{if(i===0){n==null||n(a),m(a);return}});const P=i=>{var j;const c=e.current;if(!c)return;c.style.setProperty("scroll-snap-type","none");const _=(j=c.querySelector(`.${l.orchestratorSlide}:nth-of-type(${i+1})`))==null?void 0:j.getBoundingClientRect();_&&(x(!0),k(c.scrollLeft,_.left+_.width/2-window.innerWidth/2+c.scrollLeft,{duration:Math.abs(a-i)*.3,onUpdate:B=>c.scrollLeft=B,onComplete:()=>{c.style.setProperty("scroll-snap-type","x mandatory"),x(!1)}}))},A=()=>{h(!0);const i=e.current;i&&i.style.setProperty("scroll-snap-type","none")},Y=()=>{h(!1);const i=e.current;i&&i.style.setProperty("scroll-snap-type","x mandatory")},H=(i,c)=>{const _=e.current,j=r.current;!_||!j||(_.scrollLeft+=c.delta.x*((s.length-1)/2)*(_.clientWidth/j.clientWidth))},L=V(0),C=V(0),K=i=>{const c=i.currentTarget.getBoundingClientRect(),_=i.clientX-c.left,j=i.clientY-c.top,B=_/c.width-.5,Q=j/c.height-.5;L.set(B),C.set(Q)},J=()=>{L.set(0),C.set(0)};return t.jsxs(g.div,{className:l.root,style:{"--dynamic-number-of-slides":s.length,"--dynamic-active-slide-index":a},children:[t.jsx(ot,{featuredMusic:s,activeSlideIndex:y?u:a}),t.jsx("aside",{className:l.sidebar,"aria-hidden":"true",children:t.jsx(le,{children:t.jsx(de,{children:s.map((i,c)=>t.jsx(ue,{isActive:y?u===c:a===c,onActivate:()=>{P(c)},children:t.jsx(re,{tabIndex:-1,children:i.title})},i._id))})})}),t.jsxs("div",{className:l.canvasesWrapper,children:[t.jsx("div",{className:w(l.canvasWrapper,l.canvasVisibleWrapper),children:t.jsx(g.ul,{className:w(l.canvasVisible,l.canvasGrid),style:{y:E,x:O,z:0},children:s.map((i,c)=>t.jsx(st,{music:i,scrollVelocity:q,hoverTiltX:L,hoverTiltY:C,slideIndex:c,slidesCount:s.length,activeSlideIndex:a,isPanning:S},i._id))})}),t.jsx("div",{className:w(l.canvasWrapper,l.canvasOrchestratorWrapper),ref:e,children:t.jsx(g.div,{className:l.canvasGrid,onTouchMove:()=>{h(!0)},onTouchEnd:()=>{h(!1)},style:{y:T},children:s.map((i,c)=>t.jsx(ae,{href:i.handle,onMouseMove:K,onMouseLeave:J,className:w(l.slidePositioner,l.orchestratorSlide,{[l.orchestratorSlideActive]:a===c}),"aria-label":i.title,onFocus:()=>P(c),style:{"--dynamic-slide-index":c}},i._id))})})]}),t.jsx("div",{className:l.indicator,ref:r,children:t.jsx(Te,{numberOfSlides:s.length,scrollProgress:f,onDragStart:A,onDragEnd:Y,onDrag:H})})]})},W=({scrollVelocity:o,outputRange:n,shouldUseStaticVelocity:s=!1})=>{const d=F("lg")?1e3:80,u=we(),m=V(0),S=V(d);return I(u?m:s?S:o,[-d,0,d],n)},U=(o,n,s)=>{const e=s?200:500,r=(n-1)/2,a=o-r;return n%2===0?a===-.5||a===.5?-(a/r)*e:-((a>0?Math.ceil(a):Math.floor(a))/r)*e:-(a/r)*e},st=({scrollVelocity:o,hoverTiltX:n,hoverTiltY:s,music:e,slideIndex:r,slidesCount:a,activeSlideIndex:d,isPanning:u})=>{const m={stiffness:100,mass:.1,damping:20},S=F("lg"),h=d===r,y=p.useRef(null),x=I(s,[-.5,.5],h?[8,-8]:[0,0]),M=b(x),N=I(n,[-.5,.5],h?[-8,8]:[0,0]),R=W({scrollVelocity:o,outputRange:[-35,0,-35],shouldUseStaticVelocity:u}),v=be`${o.get()!==0?R:N}deg`,f=b(v,m),q=d<r,T=d>r,E=W({scrollVelocity:o,outputRange:[q?.5:0,q?S?1:.8:0,q?.5:0],shouldUseStaticVelocity:u}),O=b(E,m),P=W({scrollVelocity:o,outputRange:[1.1,1,1.1],shouldUseStaticVelocity:u}),A=b(P,m),Y=W({scrollVelocity:o,outputRange:[30,T?-40:0,30],shouldUseStaticVelocity:u}),H=b(Y,m),L=W({scrollVelocity:o,outputRange:[U(r,a,!S),!S&&T?-80:0,U(r,a,!S)],shouldUseStaticVelocity:u}),C=b(L,m);return t.jsx("li",{ref:y,className:w(l.visibleSlide,l.slidePositioner),style:{"--dynamic-slide-index":r,"--dynamic-color":e.color},children:t.jsx(g.div,{style:{x:C,perspective:"100vw"},children:t.jsxs(g.div,{className:l.showcaseSlideInner,initial:{rotateY:0,scale:1},style:{rotateY:f,rotateX:M,scale:A},children:[ie(e.cover)&&t.jsx(ce,{...e.cover,sizes:pe({lg:"40vw"},"90vw"),priority:r===0}),t.jsx("div",{className:l.showcaseSlideInnerBorder}),t.jsx(g.div,{className:l.showcaseSlideInnerDropShadow,initial:{x:0,z:-150},style:{x:H,z:-150}}),t.jsx(g.div,{className:l.showcaseSlideInnerInsetShadow,initial:{opacity:r===d?0:1},style:{opacity:O}})]})})},e._id)},ot=({featuredMusic:o,activeSlideIndex:n})=>{const s=p.useRef(null);return p.useEffect(()=>{var d;const e=s.current;if(!e)return;e.style.setProperty("scroll-snap-type","none");const r=(d=e.querySelector(`.${l.navItem}:nth-of-type(${n+1})`))==null?void 0:d.getBoundingClientRect();if(!r)return;const a=k(e.scrollLeft,r.left+r.width/2-window.innerWidth/2+e.scrollLeft,{duration:.5,onUpdate:u=>e.scrollLeft=u,onComplete:()=>{e.style.setProperty("scroll-snap-type","x mandatory")}});return()=>{a.stop()}},[n]),t.jsx("nav",{className:l.mobileNav,ref:s,children:t.jsx("ul",{className:l.navList,children:o.map((e,r)=>t.jsx(g.li,{className:w(l.navItem,{[l.navItemActive]:n===r}),initial:{opacity:n===r?1:.4},animate:{opacity:n===r?1:.4},children:e.title},e._id))})})},nt=({musicLandingPage:o,musicCollectionPromise:n})=>{const[s,e]=p.useState(o.featuredMusic[0].soundclip),r=a=>{e(o.featuredMusic[a].soundclip)};return t.jsxs("div",{className:D.root,children:[t.jsx(se,{children:t.jsx("h1",{children:"Music"})}),t.jsx(tt,{musicLandingPage:o,onSlideLazyChange:r}),t.jsx(p.Suspense,{children:t.jsx(Z,{resolve:n,children:([a,d])=>t.jsx("div",{className:D.musicCollectionWrapper,children:t.jsx(oe,{initialItems:a.items,initialPagination:a.pagination,...d})})})}),t.jsx(ge,{children:s&&t.jsx("div",{className:D.soundClipWrap,children:t.jsx(ne,{className:D.soundclip,soundclip:s})})})]})};function rt(){const{musicLandingPage:o,i18n:n,musicCollectionPromise:s}=te();return t.jsx(nt,{musicLandingPage:o,musicCollectionPromise:s,i18n:n})}const Bt=ee(rt),Xt=({data:o,matches:n})=>{const{defaultSeo:s}=n[0].data,e=o==null?void 0:o.pageSeo;return ye(s,e)};export{Bt as default,Xt as meta};
